/*
#include "msp430.h"

#include <math.h>
#include <stdint.h>
#include <stdbool.h>
#include <string.h>

#include "DSPLib.h"

//if both of the above are 0, defaults to 1MHz operation
#define CS_8MHZ             0
#define CS_16MHZ            1

#define SAMPLES             256
#define S             128

DSPLIB_DATA(inputMatrixColumn,4)
_q15 inputMatrixColumn[256] = {1684,1566,1090,1865,2317,815,3085,5777,0,428,7620,6446,0,6029,9002,3640,0,0,2145,0,0,759,3828,0,0,2207,392,0,734,2575,0,0,757,1540,718,0,1982,1453,0,0,0,0,1955,3567,0,0,4858,4388,10305,12467,13009,9104,6056,7891,8147,6021,2556,2749,2447,3122,2909,2745,2556,3032,3422,4303,4389,5571,2104,1772,1554,6611,809,249,4152,7550,472,2218,8611,7901,5815,7834,7873,4023,4646,6666,5130,2864,0,0,2631,583,40,2052,3067,1072,0,673,2969,3171,0,71,5168,1460,0,4029,5451,0,916,4848,1564,0,607,241,1058,0,0,0,933,1430,1447,3456,1073,6728,3246,4271,3040,6813};

DSPLIB_DATA(circularMatrixColumn,4)
_q15 circularMatrixColumn[256] = {-481,-6677,7618,4423,10707,9610,2747,-7194,2386,-2903,-1650,767,-1088,1478,-1780,2358,-9931,-2158,1185,-8885,-9200,-1714,-5722,-6421,377,-4595,-3299,3569,2908,1917,-1249,-3697,-5849,1547,-585,-8200,3154,288,-4801,-8855,1790,-5158,5406,6972,-6079,2491,9196,3460,1656,1966,6235,2916,-5192,-6728,-3263,94,-319,6690,2028,-4509,-2314,-7968,6110,1457,979,6882,5889,3556,-40,-4233,582,5080,-3114,-1233,-5180,-7591,2839,-983,3761,5575,6549,-950,-1083,1551,3486,-1365,-5255,8771,2136,-634,-6299,-8185,-4398,-1786,-1368,-2994,7849,388,-77,7212,1118,-245,1620,6632,2098,4185,9156,-10221,-7484,-1684,-1528,-940,3237,3315,-711,6629,11699,536,-2905,-2424,-8120,-1334,-7746,-4996,-8144,-6865,4279,-435};

DSPLIB_DATA(zerocolumn,4)
_q15 zerocolumn[128]={0};

DSPLIB_DATA(input,4)
_q15 input[S*2] = {_Q15(0.9),0,_Q15(0.9),0,_Q15(0.9),0,_Q15(0.1),0,_Q15(0.1),0,_Q15(0.1),0,_Q15(0.1),0,_Q15(0.4),0};
//_iq31 input[S*2] = {_IQ31(0.9*0.004),0,_IQ31(0.9*0.004),0,_IQ31(0.9*0.004),0,_IQ31(0.1*0.004),0,_IQ31(0.1*0.004),0,_IQ31(0.1*0.004),0,_IQ31(0.1*0.004),0,_IQ31(0.4*0.004),0};
//_iq31 input[512] = {_IQ31(0.01),_IQ31(0.02),_IQ31(0.03),_IQ31(0.04),_IQ31(0.05),_IQ31(0.06),_IQ31(0.07),_IQ31(0.08)};

DSPLIB_DATA(input2,4)
_q15 input2[S*2] = {_Q15(0.1),0,_Q15(0.1),0,_Q15(0.1),0,_Q15(0.1),0,_Q15(0.1),0,_Q15(0.1),0,_Q15(0.1),0,_Q15(0.2),0};
//_iq31 input2[S*2] = {_IQ31(0.1*0.004),0,_IQ31(0.1*0.004),0,_IQ31(0.1*0.004),0,_IQ31(0.1*0.004),0,_IQ31(0.1*0.004),0,_IQ31(0.1*0.004),0,_IQ31(0.1*0.004),0,_IQ31(0.2*0.004),0};

DSPLIB_DATA(result,4)
_q15 result[S*2];

/*
DSPLIB_DATA(tem1,4)
_q15 tem1[256];


DSPLIB_DATA(tem1,4)
_iq31 tem2[256];

int32_t inputVector[SAMPLES] = {
0x08f11159, 0x121ce61b, 0x173ff715, 0x163be513, 0x1f3307ca, 0xf5eb162e, 0x07be107c, 0xf852ea79,
0x18b0001f, 0x09fe0215, 0xfa7a08c6, 0x10e3f37a, 0x095603dd, 0x1c98fe4c, 0xf5e8f08d, 0x01e6f133,
0x174cfeda, 0xf5ee1403, 0xf916ee8d, 0xf6570c28, 0xe2581849, 0xe8c6ec42, 0x16baea16, 0xea35e118,
0xe32def6b, 0xf832f434, 0xe7ad1da6, 0xe1850915, 0x0760f104, 0xe191fe1d, 0xef50fd49, 0xfc22e377,
0xf77b069c, 0xf529f210, 0xfe39f091, 0x08d9eb7f, 0x17c0e090, 0x0aa5f1a0, 0x12b7ee7b, 0x1de5f4db,
0xe90ef5e4, 0x138a1617, 0x1f2c10bb, 0x01bef50f, 0xf32ce68d, 0xe3d5e34f, 0x06c6e27b, 0xe9171ff6,
0x1206fe41, 0xeed11e3f, 0x09be103e, 0xf0cff7ab, 0xe94be17f, 0x0ff9fb75, 0xf04ffc02, 0xf1e5eddf,
0x03f6195d, 0xea19056f, 0xfa7fe323, 0x09aeebd7, 0x0f26edaa, 0x1025ed84, 0x0d7a15ec, 0x142cf93d,
0x177b1f81, 0xefc002fd, 0xfaa9e13b, 0x02b9e08f, 0x1c02e3f3, 0x1ff412b2, 0x00910c52, 0xe5b011d9,
0x17480487, 0xe7aa0fc7, 0xfb9f11c7, 0xff72f159, 0x1edc0ac5, 0xe0b20f96, 0x08d2ec58, 0x0bd8f4df,
0xf7dce04f, 0x0189fb99, 0x1c27f285, 0x16770442, 0x16f5f82b, 0x047cf66b, 0x08441786, 0x1c0eea2c,
0xf9f41f8c, 0xf15403b8, 0xf512f592, 0x0057f0c6, 0x005b13ee, 0x0046e109, 0x15e6092e, 0xe97e0c1f,
0x07b80dc2, 0x0047eb07, 0xef49e3e0, 0x1c0a16be, 0x0d29063e, 0x1dc4e087, 0x0ab2156d, 0xf4faf9d4,
0xfd8d04a6, 0xfa38e64e, 0x1713f29f, 0x068dfa90, 0x1b97176f, 0xe09e06d3, 0x12f2f17f, 0xff420a1b,
0xf5221aab, 0xfe8bff89, 0x1646e46b, 0xeaa91a95, 0xfb1ce370, 0xf8dd086d, 0x024105ce, 0x0a74edd7,
0x1425ffce, 0xf26c04ac, 0xff3ceb39, 0x02a7f8f9, 0xffcd1ad3, 0x0c52e346, 0xed6112bf, 0xed6b0b93,
};

_q15 circularMatrixColumn[512];
const float weight5_7[10][128]= {
                                 {0.006266918033361435,-0.11355813592672348,-0.2118023931980133,-0.13849112391471863,0.07155395299196243,-0.11300869286060333,-0.013906999491155148,-0.016894860193133354,0.11523007601499557,-0.03735342249274254,0.15877732634544373,-0.012552332133054733,0.03860313072800636,0.10292738676071167,-0.13446110486984253,-0.12820233404636383,-0.04571901634335518,-0.07879973202943802,-0.13675333559513092,-0.06269428133964539,-0.06634914875030518,0.05540396273136139,-0.07030642777681351,-0.09277952462434769,-0.05599753558635712,-0.10965922474861145,0.10017313808202744,0.023463265970349312,0.11922202259302139,0.12713134288787842,-0.08186110854148865,-0.07809510082006454,-0.0037743335124105215,0.05115741491317749,-0.08546273410320282,-0.08998885005712509,0.022869234904646873,-0.10280819237232208,-0.08806611597537994,-0.19499963521957397,0.03223000839352608,-0.006949813570827246,-0.044147275388240814,-0.08174006640911102,0.017057621851563454,0.012018430046737194,-0.17970454692840576,0.06264376640319824,0.23394834995269775,-0.03917449712753296,0.038706984370946884,0.06635700166225433,0.08345615118741989,-0.1197897270321846,0.03431158885359764,0.07487190514802933,0.1766539067029953,0.04573092982172966,-0.1972491443157196,-0.053982220590114594,0.09167789667844772,-0.044986188411712646,-0.08809401839971542,-0.06839245557785034,0.016205456107854843,0.08744421601295471,0.14555029571056366,-0.10324326157569885,-0.102104052901268,0.11259212344884872,0.10108712315559387,-0.04962475970387459,0.02570429816842079,-0.12868337333202362,-0.1550639569759369,0.04687723517417908,-0.07642453163862228,-0.1384274959564209,0.07318184524774551,-0.003593672998249531,0.007369460072368383,0.07274996489286423,0.13254491984844208,-0.02242187224328518,0.10492490977048874,0.07841083407402039,0.0396575890481472,-0.07722050696611404,-0.01972988247871399,-0.009896522387862206,-0.04129255935549736,-0.20444808900356293,-0.1433202028274536,0.013177861459553242,0.04673399776220322,-0.1691940873861313,0.027407657355070114,0.0798877477645874,0.20834217965602875,-0.024460600689053535,0.16421779990196228,0.09367913007736206,0.026396309956908226,-0.10991659760475159,-0.08112944662570953,0.05075894668698311,0.07235485315322876,0.07779011875391006,0.04146194830536842,0.03688117861747742,0.08401353657245636,0.1599830687046051,-0.05953114852309227,-0.1891830414533615,0.05619572848081589,0.01024372037500143,0.07433926314115524,0.03379535675048828,-0.08818691968917847,-0.01631038635969162,-0.15689237415790558,0.06358910351991653,0.046380020678043365,0.05667123943567276,0.10149303078651428,0.017665967345237732,-0.03462095931172371,0.03602117672562599,},
                                 {0.0033107143826782703,-0.01134298462420702,0.008735477924346924,0.11992206424474716,0.03933674469590187,-0.09040672332048416,-0.06453140825033188,0.04615546390414238,0.02563021332025528,-0.11342867463827133,-0.15989896655082703,-0.08795182406902313,-0.08225777745246887,-0.13138872385025024,-0.10296054929494858,0.07621508091688156,0.15092867612838745,-0.0636046752333641,-0.06885361671447754,0.02537769265472889,0.025317024439573288,-0.06411264091730118,0.010020370595157146,0.08370741456747055,-0.11471296846866608,-0.15953950583934784,-0.09234395623207092,-0.09122701734304428,-0.08908307552337646,-0.18113595247268677,0.031073929741978645,-0.0013943850062787533,-0.033947307616472244,-0.14875932037830353,0.06470942497253418,-0.14415645599365234,0.044152989983558655,0.020471051335334778,0.08152299374341965,-0.10757721960544586,0.11212782561779022,-0.18446223437786102,0.011866921558976173,0.0677303671836853,0.06214986369013786,-0.12607257068157196,0.18550890684127808,0.05042656883597374,0.0065157306380569935,0.07491640001535416,-0.011293304152786732,0.004877575673162937,0.06871674209833145,0.05679519101977348,0.07202662527561188,-0.013158571906387806,-0.047157928347587585,-0.11888320744037628,-0.013210996054112911,-0.09740915894508362,0.2313830405473709,0.09051936119794846,-0.1159137636423111,0.0988059714436531,0.09704533219337463,-0.11581467092037201,0.04617889225482941,0.23593978583812714,0.011897627264261246,0.11492369323968887,-0.05871780589222908,0.05444332957267761,-0.042935460805892944,-0.0009783784626051784,-0.005108399782329798,0.12285138666629791,0.04346466436982155,-0.028214072808623314,0.005246094893664122,0.12005935609340668,-0.010689946822822094,-0.17940674722194672,0.01343710906803608,0.1410735845565796,-0.015711098909378052,0.0689486637711525,0.012772150337696075,0.06516848504543304,-0.00788429006934166,0.04481927305459976,-0.0544004924595356,-0.03311392664909363,-0.08764737099409103,-0.08201580494642258,-0.17271877825260162,0.1566070020198822,0.055512186139822006,-0.018642520532011986,-0.13360336422920227,0.2336159646511078,0.199998676776886,0.06235005334019661,-0.06169242784380913,-0.032641664147377014,0.08525523543357849,0.005219751503318548,0.030664661899209023,0.1339169144630432,0.03181814029812813,-0.026561956852674484,0.016716666519641876,0.05593309924006462,0.0327625535428524,-0.013892550952732563,0.027046849951148033,-0.06860277056694031,0.07362469285726547,-0.04832055792212486,-0.13333159685134888,0.011571340262889862,0.07869677990674973,0.07277167588472366,0.09390952438116074,0.045025840401649475,0.0037125088274478912,0.059828951954841614,-0.0802832543849945,-0.07324400544166565,},
                                 {0.11318536847829819,-0.0019598854705691338,-0.15312102437019348,0.14997795224189758,-0.08875678479671478,0.028678055852651596,-0.046639688313007355,-0.05731669068336487,-0.047320347279310226,-0.02166205272078514,0.0018963196780532598,0.09239963442087173,0.26064184308052063,0.03831719607114792,-0.05555158853530884,0.0699213445186615,-0.05347917973995209,-0.07990375906229019,-0.17785710096359253,-0.03775236755609512,-0.020856212824583054,0.10392025858163834,0.2751210033893585,0.002840988803654909,0.13402846455574036,0.013344937935471535,-0.05144668370485306,-0.06419714540243149,0.03233036771416664,0.12741531431674957,0.10017897933721542,0.0819840356707573,0.04908404126763344,0.028860460966825485,0.02799191325902939,-0.06013772636651993,-0.01878231391310692,-0.1671791672706604,-0.02408749982714653,-5.8868652558885515e-05,-0.008323278278112411,-0.1808316856622696,-0.11436723172664642,0.03856904059648514,-0.03308591991662979,0.05054428055882454,-0.05197671428322792,0.0919852927327156,-0.05338039994239807,0.2356293648481369,0.18353904783725739,0.08057055622339249,0.07225488871335983,-0.016765141859650612,0.0033327285200357437,0.0720641016960144,-0.019733602181077003,-0.06799368560314178,-0.10615729540586472,0.20403677225112915,-0.17983278632164001,-0.25425174832344055,0.02593734674155712,0.21769821643829346,0.00035268819192424417,-0.05283484235405922,0.21637088060379028,0.07543213665485382,0.13429713249206543,0.11975333839654922,0.12035150825977325,0.038775235414505005,-0.009282645769417286,-0.03575920686125755,-0.05626818537712097,-0.08221103996038437,-0.01932600326836109,0.030368726700544357,0.14891307055950165,0.026174992322921753,-0.1091390997171402,-0.012754465453326702,0.12649177014827728,0.049254029989242554,0.039523739367723465,0.03346032276749611,-0.1141921654343605,-0.03769285976886749,-0.0808214470744133,-0.19456030428409576,-0.03181201219558716,0.016259998083114624,0.0037379316054284573,0.030769184231758118,0.03256065025925636,-0.009867246262729168,-0.08768440783023834,-0.020648673176765442,-0.2370995432138443,-0.21424143016338348,-0.01023976318538189,0.03428053483366966,-0.20862101018428802,-0.05813070759177208,0.0007335422560572624,0.04953271895647049,-0.0038098066579550505,-0.05426055192947388,0.10300926119089127,0.17327523231506348,-0.02629091590642929,-0.1383092701435089,-0.12230978161096573,0.22972208261489868,0.012727104127407074,0.02227870188653469,-0.004380028694868088,0.017436765134334564,-0.04000594839453697,-0.1713467836380005,-0.20631685853004456,0.004180344752967358,0.1760629117488861,-0.05946682021021843,0.03432241827249527,0.11498485505580902,-0.030818955972790718,0.03161241486668587,},
                                 {-0.002182416385039687,-0.05366222560405731,0.18706931173801422,-0.02422521822154522,-0.17013593018054962,0.06595242023468018,0.08696547150611877,-0.044170837849378586,0.04010126739740372,0.21943426132202148,0.11696569621562958,-0.08278120309114456,-0.005144108086824417,-0.16615821421146393,0.07151421904563904,0.03137296810746193,-0.018394524231553078,-0.13738416135311127,0.2083406299352646,0.4013598561286926,-0.031684111803770065,-0.15513569116592407,0.01215230580419302,-0.06486424803733826,0.030049214139580727,0.04674492031335831,-0.002852819627150893,-0.08724512904882431,0.09357127547264099,0.1004607230424881,-0.012680543586611748,0.1499384343624115,0.10556697845458984,-0.030008677393198013,0.002597619080916047,0.16477733850479126,-0.08563761413097382,-0.1100112646818161,-0.05365718901157379,0.14888928830623627,-0.1065484955906868,-0.16384485363960266,-0.10722441226243973,0.10553399473428726,0.08575881272554398,0.030038757249712944,0.0942569449543953,0.031965989619493484,-0.08661717921495438,-0.06861031800508499,-0.051523324102163315,-0.06377106159925461,-0.056807734072208405,-0.07892385870218277,0.09185440838336945,0.03725341334939003,0.02443535253405571,-0.02437266707420349,0.00858660601079464,-0.09454108774662018,-0.08168406784534454,-0.11100979894399643,0.08681327104568481,0.05542533099651337,0.0885922759771347,-0.12846526503562927,0.06776868551969528,0.13799181580543518,-0.020034072920680046,-0.1342463195323944,-0.026464680209755898,0.030173931270837784,0.031066592782735825,0.04541347920894623,-0.04987090826034546,-0.11753762513399124,-0.06855437904596329,0.14860829710960388,-0.13552255928516388,-0.05987819656729698,0.08861221373081207,-0.05706086382269859,-0.030879423022270203,0.08501237630844116,0.05603437125682831,-0.054904818534851074,-0.12062305212020874,0.008297264575958252,0.04228362441062927,-0.021711893379688263,-0.012784698978066444,0.03802170604467392,0.15066079795360565,-0.10368692129850388,0.023624490946531296,-0.019973130896687508,-0.0947723537683487,0.04398200660943985,-0.0022159528452903032,-0.08212358504533768,-0.04839475452899933,-0.0861789658665657,0.07390560954809189,-0.08194316178560257,-0.2443421185016632,0.11947771161794662,-0.09107862412929535,-0.11689931154251099,0.019800731912255287,-0.04952849820256233,-0.20184388756752014,-0.13635921478271484,-0.025663109496235847,-0.019949477165937424,0.0074233403429389,0.02888408489525318,-0.15365822613239288,0.05960829183459282,-0.057539843022823334,-0.07568803429603577,-0.017522435635328293,0.06153270602226257,0.011379186064004898,0.026606369763612747,-0.09748334437608719,-0.001916116918437183,-0.09901376813650131,-0.048873916268348694,},
                                 {-0.08099677413702011,-0.08945459872484207,-0.05260154977440834,-0.16936181485652924,-0.02669093757867813,-0.06379182636737823,0.05483125150203705,0.0658705085515976,0.18140283226966858,0.01376146636903286,-0.22450506687164307,-0.11981545388698578,0.02447103150188923,-0.09921064227819443,-0.05437462031841278,0.015427649021148682,0.011197385378181934,0.07166838645935059,-0.15214885771274567,-0.06360206753015518,-0.07985228300094604,-0.05173105373978615,-0.15686729550361633,0.10521630197763443,0.06701716035604477,-0.013491126708686352,-0.1844671666622162,-0.026552576571702957,-0.13416177034378052,0.03144334629178047,-0.15003857016563416,-0.10562149435281754,-0.10659707337617874,-0.006575059611350298,-0.05187176167964935,-0.03418786823749542,-0.20192965865135193,0.13012158870697021,0.0831475630402565,-0.026308249682188034,0.07988527417182922,0.05705031007528305,0.0757816806435585,0.08544979989528656,0.23927313089370728,0.0060282000340521336,0.07872002571821213,-0.058149952441453934,0.006778687238693237,-0.010303689166903496,0.06490333378314972,-0.08103767782449722,0.007166468072682619,0.16192887723445892,-0.12250950187444687,-0.1173505038022995,-0.08037082850933075,-0.08704809844493866,0.011634327471256256,0.08808241784572601,-0.08781488239765167,0.17244897782802582,0.13941659033298492,0.03239551559090614,-0.041121210902929306,-0.10317201912403107,-0.05053134262561798,-0.09895800054073334,-0.13487303256988525,0.1100318431854248,-0.055181242525577545,-0.029801134020090103,0.042550329118967056,0.0013317377306520939,0.01271529495716095,0.08448656648397446,0.10533206909894943,0.036687206476926804,0.252881795167923,0.008757100440561771,0.07846208661794662,0.21151140332221985,-0.11715810745954514,-0.0788596048951149,-0.1291615068912506,0.021621568128466606,0.021120108664035797,-0.15477749705314636,-0.0656491219997406,0.16913259029388428,0.157573863863945,0.0027326808776706457,0.1717502623796463,0.03876305744051933,-0.028210507705807686,0.03222571313381195,0.2182961106300354,0.011550928466022015,-0.07274100184440613,0.10811110585927963,0.007014400791376829,0.08068680763244629,-0.07609549164772034,0.1612875610589981,0.10455954074859619,0.06489098817110062,0.0727493166923523,0.07385572046041489,-0.09151284396648407,-0.09788570553064346,-0.04967986047267914,-0.13659176230430603,0.044773802161216736,0.10462173074483871,-0.09869031608104706,0.012894588522613049,0.10154491662979126,-0.062129199504852295,-0.14881166815757751,0.08214370906352997,0.09512609243392944,0.03440326452255249,0.01540494617074728,-0.01810210943222046,-0.11072710156440735,-0.06604406982660294,0.0025450484827160835,-0.16584564745426178,},
                                 {0.13029150664806366,0.04605647921562195,0.09930258244276047,0.15112853050231934,0.09317740052938461,0.022876262664794922,-0.10326700657606125,0.04988255351781845,0.06787343323230743,-0.014390253461897373,0.0168202742934227,0.004680870100855827,-0.05771447345614433,-0.021328963339328766,0.03078491799533367,0.028170078992843628,-0.18835048377513885,0.1798284500837326,0.10268492251634598,-0.004002023488283157,-0.01248670369386673,-0.00927757564932108,-0.04070175439119339,-0.1646362841129303,-0.009476142935454845,-0.09006347507238388,0.10823328793048859,0.0069488962180912495,-0.02165183424949646,-0.03068704716861248,0.10427672415971756,0.07971464097499847,0.045051395893096924,0.013469714671373367,-0.0409606397151947,0.17589448392391205,-0.011568239890038967,0.24018901586532593,0.06579176336526871,-0.14724276959896088,0.11575579643249512,0.06639299541711807,0.24628151953220367,-0.08806081861257553,-0.11903665214776993,-0.1336900144815445,-0.05930379405617714,0.010884891264140606,-0.0782429650425911,-0.14511413872241974,-0.2046077400445938,0.09148518741130829,-0.13892023265361786,-0.045987214893102646,-0.11285877227783203,-0.08790253102779388,-0.002433496294543147,0.008666854351758957,0.04273943230509758,-0.05659062787890434,0.016071239486336708,0.08490125834941864,-0.13143658638000488,-0.04147173464298248,-0.016083234921097755,-0.08924942463636398,-0.0982033908367157,0.06836347281932831,-0.036844197660684586,-0.13829992711544037,0.12092624604701996,0.02512439712882042,0.014819871634244919,0.12254945188760757,0.11155148595571518,0.08993273973464966,0.0622112862765789,-0.05851363018155098,-0.1220124363899231,-0.017539700493216515,-0.08178787678480148,0.026639414951205254,0.056193411350250244,-0.1964614987373352,-0.10835000872612,-0.0743090882897377,0.11807834357023239,0.009923587553203106,-0.05302250385284424,-0.044874291867017746,-0.07368449866771698,0.09830967336893082,0.046240732073783875,0.028027474880218506,-0.10068603605031967,-0.06391751021146774,0.036347486078739166,0.12840181589126587,0.21063128113746643,0.024813193827867508,-0.10604176670312881,0.021874722093343735,-0.09931980073451996,-0.05920014530420303,-0.0012106866342946887,-0.10944104939699173,-0.10826132446527481,0.005436163395643234,-0.0343393050134182,-0.11902373284101486,-0.04366239160299301,0.08010722696781158,-0.05233808606863022,0.13158263266086578,0.21129365265369415,0.009884863160550594,-0.06198803707957268,-0.009243924170732498,0.04562439024448395,0.08886206895112991,0.1896289885044098,-0.04659966006875038,-0.012152095325291157,-0.026122745126485825,-0.06943557411432266,-0.04039895907044411,-0.02960207499563694,-0.023229090496897697,},
                                 {-0.11930471658706665,-0.03778952732682228,-0.09481479972600937,-0.07507655024528503,-0.05386378988623619,-0.06391604989767075,-0.09234949946403503,-0.1778431087732315,-0.09920056164264679,-0.3036540746688843,-0.13898979127407074,0.1229427382349968,-0.02378176711499691,0.15983150899410248,0.04057569056749344,-0.04253309965133667,0.10835927724838257,0.21909070014953613,-0.10705560445785522,-0.1026960089802742,-0.049806538969278336,-0.0873202532529831,0.012682122178375721,-0.09290534257888794,-0.06974975019693375,-0.14328604936599731,-0.024762731045484543,-0.022783754393458366,0.023951543495059013,0.11881125718355179,0.0813472643494606,0.21003450453281403,0.10639520734548569,0.0322202630341053,-0.05553612485527992,-0.19660305976867676,0.028231393545866013,0.08804860711097717,0.05855918303132057,-0.07303612679243088,-0.013744037598371506,0.18426355719566345,0.09146048873662949,-0.08026132732629776,-0.1371675431728363,0.020776640623807907,-0.0820925235748291,-0.09782228618860245,0.10927393287420273,-0.05503198876976967,0.00990853738039732,0.10321158170700073,-0.056587446480989456,0.024755580350756645,0.0489882156252861,-0.09900250285863876,-0.06117032468318939,-0.06353089213371277,-0.06481078267097473,0.09296865016222,-0.023112712427973747,0.11698442697525024,0.03911447897553444,0.0016312194056808949,-0.005319359712302685,0.17901529371738434,-0.012445232830941677,-0.07749481499195099,-0.18445725739002228,-0.02992629073560238,0.0067192064598202705,-0.03231467679142952,-0.13513365387916565,-0.018914174288511276,-0.00240405835211277,-0.07481441646814346,-0.032862588763237,0.00836067646741867,0.05403154715895653,0.04151367023587227,-0.14402586221694946,-0.030200134962797165,0.136376291513443,-0.09109973907470703,-0.23432666063308716,0.02269054763019085,0.03433026373386383,-0.08469954133033752,-0.13602206110954285,0.0009874922689050436,0.11471502482891083,0.1711084097623825,-0.13196776807308197,-0.06729154288768768,-0.05553741753101349,-0.10745127499103546,-0.2622000277042389,-0.008083190768957138,0.2257264256477356,0.11506648361682892,-0.004607370123267174,-0.016990983858704567,0.16330130398273468,0.09904802590608597,0.09429815411567688,0.022768395021557808,0.09176963567733765,0.002843814669176936,0.008131109178066254,-0.17697346210479736,0.011571197770535946,0.07316914945840836,0.004873993806540966,-0.10375437140464783,0.0524730309844017,-0.0009392633801326156,-0.025274261832237244,0.0075196148827672005,0.16671863198280334,-0.030431324616074562,-0.10352573543787003,0.009231634438037872,-0.10309933871030807,0.005594824440777302,-0.06718296557664871,-0.15202836692333221,-0.021723035722970963,0.09119074791669846,},
                                 {0.10483582317829132,0.041080426424741745,0.023712119087576866,-0.014368889853358269,-0.020070092752575874,-0.07309775799512863,-0.1710282564163208,0.02805766649544239,-0.08038165420293808,-0.0625123456120491,-0.08204630017280579,0.0473715178668499,-0.1693332940340042,0.1257837414741516,-0.08390113711357117,0.060073431581258774,0.06679262220859528,-0.036593127995729446,-0.028693584725260735,-0.08560995012521744,0.0791836827993393,-0.04291750490665436,-0.04871413856744766,0.17236481606960297,-0.13712063431739807,0.10868001729249954,0.07286327332258224,0.20779462158679962,-0.1180591955780983,-0.08040506392717361,-0.08907682448625565,-0.15492136776447296,-0.0876012071967125,-0.00793491955846548,-0.10433322191238403,0.16631877422332764,0.1480700820684433,0.15237775444984436,0.010535962879657745,0.019558928906917572,-0.14549671113491058,-0.19703635573387146,-0.05615784227848053,0.1403525322675705,0.004388593137264252,-0.12345650047063828,0.13280020654201508,-0.0922919437289238,-0.07045461237430573,-0.15265589952468872,0.006330971606075764,0.20544950664043427,0.019317008554935455,0.07531198114156723,0.09169502556324005,0.05969787389039993,0.05840522423386574,-0.10290351510047913,-0.02617182396352291,0.0954185500741005,-0.0185783002525568,-0.0064046611078083515,0.014447259716689587,-0.1169886589050293,0.06834766268730164,-0.028823761269450188,-0.0597262941300869,-0.07121479511260986,0.20960743725299835,-0.020625965669751167,0.07824136316776276,-0.1554979383945465,0.11777659505605698,0.1541306972503662,0.020442413166165352,0.008432724513113499,0.009741140529513359,-0.08673278987407684,0.039873119443655014,0.16015426814556122,-0.05864716321229935,-0.06419754773378372,-0.1286555826663971,-0.08577382564544678,-0.0004115731571801007,0.07758282870054245,0.09194377809762955,0.11914699524641037,0.12330443412065506,0.010415277443826199,0.0629098042845726,-0.1553267538547516,0.028702151030302048,0.005773365031927824,0.054079558700323105,0.17056438326835632,0.12978290021419525,-0.14956818521022797,-0.15790759027004242,0.12977510690689087,-0.0827072262763977,-0.10822495073080063,-0.06536396592855453,0.030366605147719383,0.02544129453599453,0.060992851853370667,-0.08423210680484772,0.16577771306037903,-0.023167889565229416,0.08671935647726059,0.008481309749186039,0.11725769937038422,0.1143244132399559,0.041067786514759064,-0.0018205768428742886,-0.12277539074420929,-0.06558265537023544,-0.061735786497592926,0.11880260705947876,-0.06613879650831223,0.10895969718694687,-0.17112630605697632,0.0004156937065999955,0.010707166977226734,0.12923848628997803,-0.009980035945773125,-0.03436475619673729,-0.012039770372211933,},
                                 {-0.13093450665473938,-0.09180351346731186,-0.03723008185625076,0.0571618527173996,-0.15918628871440887,0.057028092443943024,0.022321052849292755,-0.10426805168390274,-0.10905612260103226,0.030278407037258148,0.12339572608470917,-0.016224045306444168,0.07652166485786438,-0.014408932067453861,0.11006417870521545,-0.08340521156787872,-0.12614116072654724,0.054261256009340286,-0.045561328530311584,-0.05123414099216461,-0.018858768045902252,0.0951995700597763,0.0116279860958457,-0.05948253348469734,0.02404555305838585,0.07006251066923141,-0.2776780128479004,-0.03271329775452614,0.05863628536462784,0.15941914916038513,0.14059150218963623,-0.11567854136228561,0.06786802411079407,0.09096801280975342,0.0110512375831604,-0.06479572504758835,0.007917552255094051,0.03176616132259369,-0.03320169076323509,0.031095072627067566,0.060817401856184006,0.1768638789653778,-0.12073403596878052,-0.21476764976978302,-0.027878576889634132,0.03444479778409004,0.07901528477668762,-0.02149679884314537,0.2099764049053192,0.13273832201957703,0.06632264703512192,-0.14509519934654236,-0.04656849801540375,0.0383065827190876,0.013103422708809376,-0.042181458324193954,-0.05220850557088852,0.2114081233739853,0.24730834364891052,-0.08921974152326584,-0.07184708118438721,-0.07195474952459335,-0.04625782370567322,-0.027937930077314377,-0.0769413560628891,0.04630861431360245,-0.12840992212295532,-0.04246176779270172,0.07440338283777237,-0.09176544845104218,-0.037215203046798706,-0.013046463951468468,0.009552848525345325,-0.13688690960407257,0.03951213136315346,0.10566878318786621,-0.15209922194480896,-0.004050731658935547,-0.106910340487957,0.06431715935468674,0.022243663668632507,-0.16817069053649902,-0.018455425277352333,0.10475612431764603,-0.011028706096112728,-0.04309876263141632,0.012378071434795856,-0.048677753657102585,-0.08189838379621506,-0.037585094571113586,0.05152743309736252,0.16757214069366455,0.023412536829710007,-0.06380433589220047,0.06569024175405502,0.19954483211040497,0.11731273680925369,0.027555804699659348,-0.00962166115641594,-0.11979994177818298,-0.00944457110017538,-0.18424153327941895,0.16305309534072876,0.046156398952007294,0.012532037682831287,0.04066096618771553,-0.13592106103897095,-0.12501861155033112,0.14188216626644135,0.07901512831449509,0.07698654383420944,0.012062950059771538,-0.10646773874759674,-0.11904469132423401,-0.094553142786026,-0.001298899995163083,-0.07745629549026489,-0.1427225023508072,0.028391452506184578,0.07696536183357239,-0.1584220826625824,-0.0072425492107868195,-0.07258358597755432,0.1310395896434784,-0.09125899523496628,0.10096953809261322,-0.05868660658597946,0.06608166545629501,},
                                 {-0.146536722779274,-0.05306318402290344,0.0802118331193924,-0.011898077093064785,0.19812588393688202,-0.15359607338905334,0.1682751625776291,0.029392734169960022,0.06068447232246399,0.10285674035549164,0.004969176836311817,-0.05874154716730118,-0.1671941876411438,-0.02345186099410057,-0.08987285196781158,-0.11813097447156906,0.044784918427467346,-0.05954422801733017,0.09859570860862732,0.029756098985671997,0.060030706226825714,-0.17760081589221954,-0.1757715940475464,0.03885743021965027,0.19520916044712067,0.05153912305831909,0.06547956168651581,0.11263442784547806,0.10015877336263657,-0.11633707582950592,-0.0971701592206955,0.0975310206413269,-0.20736566185951233,0.0432770699262619,0.09003736823797226,-0.03161950781941414,-0.047517210245132446,-0.18164889514446259,-0.24807268381118774,-0.12145181000232697,0.019490649923682213,0.2851167321205139,0.0031688138842582703,-0.09926380217075348,-0.016934722661972046,-0.028368370607495308,0.06930038332939148,0.09309957176446915,-0.04642088711261749,-0.07351904362440109,0.011084993369877338,0.11087397485971451,0.04711296036839485,-0.15724016726016998,-0.2799969017505646,-0.1853736937046051,-0.007535250391811132,0.10324665158987045,0.11164978891611099,-0.11823712289333344,-0.05857149884104729,0.054598335176706314,0.037369392812252045,-0.17832063138484955,-0.07468557357788086,-0.071134053170681,-0.00385353178717196,-0.11068111658096313,0.03526140749454498,0.017513999715447426,-0.20334754884243011,0.14856958389282227,0.03165655955672264,0.048954375088214874,0.006766343489289284,0.053453024476766586,-0.0343192033469677,-0.09025813639163971,0.008711264468729496,-0.20341899991035461,0.17718370258808136,0.04754616320133209,-0.04195209965109825,-0.010553532280027866,0.104611337184906,-0.05634517967700958,-0.16380952298641205,0.15529516339302063,0.11409766227006912,0.04853668436408043,-0.14470627903938293,-0.04019598290324211,-0.06451881676912308,0.012383070774376392,0.16705235838890076,-0.06648256629705429,0.01469858642667532,0.14781026542186737,-0.021624591201543808,-0.15511612594127655,0.014186028391122818,0.06943356245756149,-0.13005012273788452,0.029793474823236465,0.15323004126548767,-0.03989444300532341,0.004046449437737465,-0.0702597051858902,-0.14062443375587463,0.05409004166722298,-0.026000790297985077,-0.17941062152385712,0.14404797554016113,0.07885315269231796,0.05932239070534706,0.07904115319252014,0.05245933309197426,0.046619217842817307,-0.08583217859268188,-0.026773370802402496,0.03540923073887825,0.11631239205598831,-0.11311633139848709,-0.007214799057692289,-0.07357455044984818,0.024559441953897476,0.09113449603319168,-0.013887323439121246,},
                             };
*/
/*
msp_cmplx_fft_q15_params fftParams;
msp_shift_q15_params shiftparams;
msp_mpy_q15_params mpParams;
msp_cmplx_mpy_q15_params  cmParams;
msp_cmplx_q15_params comparam;

// Function declarations
void initSignal(void);
void configClocks(void);
void configGPIO(void);
void isolateLEA(void);

void main(void)
{
    WDTCTL = WDTPW + WDTHOLD;

    fftParams.length = S;
    fftParams.bitReverse = 1;
    fftParams.twiddleTable = msp_cmplx_twiddle_table_128_q15;

    mpParams.length = S*2;
    cmParams.length = S;
    uint16_t s = 8;

    shiftparams.length = S*2;
    //shiftparams.scale = _IQ31(0.004);
    shiftparams.shift = -3;

    comparam.length = 128;

    // Use Timer A for a short delay to isolate the FFT
    //isolateLEA();

    //msp_cmplx_iq31(&comparam,input,tem1,input);

    msp_cmplx_q15(&comparam,inputMatrixColumn,zerocolumn,inputMatrixColumn);
    msp_cmplx_q15(&comparam,circularMatrixColumn,zerocolumn,circularMatrixColumn);

    msp_cmplx_fft_fixed_q15(&fftParams, circularMatrixColumn);
    msp_cmplx_fft_fixed_q15(&fftParams, inputMatrixColumn);

    msp_cmplx_mpy_q15(&cmParams, input, input2, result);
    //msp_mpy_iq31(&mpParams, input, input2, result);

    msp_cmplx_ifft_fixed_q15(&fftParams, result);

    int z=0,i=0;
    for (z = 0; z < 8; ++z){
        result[z]=result[i];
        i=i+2;
    }

    shiftparams.shift = 3;

    msp_shift_q15(&shiftparams,result,result);
}

// Timer A1 interrupt service routine
#if defined(__TI_COMPILER_VERSION__) || defined(__IAR_SYSTEMS_ICC__)
#pragma vector = TIMER1_A0_VECTOR
__interrupt void Timer1_A0_ISR(void)
#elif defined(__GNUC__)
void __attribute__ ((interrupt(TIMER1_A0_VECTOR))) Timer1_A0_ISR (void)
#else
#error Compiler not supported!
#endif
{
    __bic_SR_register_on_exit(LPM1_bits);
}

void isolateLEA() {
    // Use Timer A for a short delay to isolate the FFT for power analysis
    TA1CCTL0 = CCIE;                        // TACCR0 interrupt enabled
    TA1CCR0 = 100;
    TA1CTL |= TACLR;                        // Clear Timer A
    TA1CTL = TASSEL__ACLK | MC__UP;         // ACLK, UP mode
    __bis_SR_register(LPM1_bits | GIE);
    TA1CTL &= ~(MC__UP);                    // Stop Timer
    TA1CCTL0 &= ~(CCIE);                        // TACCR0 interrupt disable
}

void initSignal(){
    //memcpy(input, inputVector, sizeof(inputVector));
    //memcpy(circularMatrixColumn, weight5_7, 256 *sizeof(float));
}

void configGPIO(void)
{
    // Configure ports for low power
    PADIR = 0xFFFF;  PAOUT = 0;
    PBDIR = 0xFFFF;  PBOUT = 0;
    PCDIR = 0xFFFF;  PCOUT = 0;
    PDDIR = 0xFFFF;  PDOUT = 0;
    PJDIR = 0xFFFF;  PJOUT = 0;
    P1DIR = 0xFF;  P1OUT = 0;
    P2DIR = 0xFF;  P2OUT = 0;
    P3DIR = 0xFF;  P3OUT = 0;
    P4DIR = 0xFF;  P4OUT = 0;
    P5DIR = 0xFF;  P5OUT = 0;
    P6DIR = 0xFF;  P6OUT = 0;
    P7DIR = 0xFF;  P7OUT = 0;
    P8DIR = 0xFF;  P8OUT = 0;
}

void configClocks(void)
{
#if CS_8MHZ
    //Ensure that there are 0 wait states enabled
    FRCTL0 = FRCTLPW | NWAITS_0;


    // Clock System Setup
    CSCTL0_H = CSKEY_H;                     // Unlock CS registers
    CSCTL1 = DCOFSEL_0;                     // Set DCO to 1MHz

    // Set SMCLK = MCLK = DCO, ACLK = VLOCLK
    CSCTL2 = SELA__VLOCLK | SELS__DCOCLK | SELM__DCOCLK;

    // Per Errata CS12 set divider to 4 before changing frequency to
    // prevent out of spec operation from overshoot transient
    CSCTL3 = DIVA__4 | DIVS__4 | DIVM__4;   // Set all corresponding clk sources to divide by 4 for errata
    CSCTL1 = DCOFSEL_6;                     // Set DCO to 8MHz

    // Delay by ~10us to let DCO settle. 60 cycles = 20 cycles buffer + (10us / (1/4MHz))
    __delay_cycles(60);

    CSCTL3 = DIVA__1 | DIVS__1 | DIVM__1;   // Set MCLK  to 8MHz, SMCLK to 1MHz

    CSCTL4 = HFXTOFF + LFXTOFF;             // Cancel external clocks
    CSCTL5 &= ~(HFXTOFFG + LFXTOFFG);

    CSCTL0_H = 0;                           // Lock CS Registers

#endif

#if CS_16MHZ
    // Configure one FRAM waitstate as required by the device datasheet for MCLK
    // operation beyond 8MHz _before_ configuring the clock system.
    FRCTL0 = FRCTLPW | NWAITS_1;

    // Clock System Setup
    CSCTL0_H = CSKEY_H;                     // Unlock CS registers
    CSCTL1 = DCOFSEL_0;                     // Set DCO to 1MHz

    // Set SMCLK = MCLK = DCO, ACLK = VLOCLK
    CSCTL2 = SELA__VLOCLK | SELS__DCOCLK | SELM__DCOCLK;

    // Per Errata CS12 set divider to 4 before changing frequency to
    // prevent out of spec operation from overshoot transient
    CSCTL3 = DIVA__4 | DIVS__4 | DIVM__4;   // Set all corresponding clk sources to divide by 4 for errata
    CSCTL1 = DCOFSEL_4 | DCORSEL;           // Set DCO to 16MHz

    // Delay by ~10us to let DCO settle. 60 cycles = 20 cycles buffer + (10us / (1/4MHz))
    __delay_cycles(60);

    CSCTL3 = DIVA__1 | DIVS__1 | DIVM__1;   // Set MCLK to 16MHz, SMCLK to 1MHz

    CSCTL4 = HFXTOFF + LFXTOFF;             // Cancel external clocks
    CSCTL5 &= ~(HFXTOFFG + LFXTOFFG);

    CSCTL0_H = 0;                           // Lock CS Registers
#endif
}

*/
